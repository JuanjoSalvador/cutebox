---
import Layout from "../layouts/default.astro";
---

<Layout>
    <div class="center">
        <a href="#" id="back">&larr; Back</a>
        <div id="ancestors"></div>
        <div id="status"></div>
        <div id="descendants"></div>
        <script>
            import $ from "jquery";
            import { loadThread } from "../ts/ui/thread";
            import { checkReload }  from "../ts/workers/checkreload";
            const id = location.href.split("?id=")[1];
            checkReload();
            loadThread(id);
            $("#back").click((e) => {
                switch (localStorage.getItem("currentpage")) {
                    case "user":
                        location.href = "/user?id="+localStorage.getItem("lastuser");
                        break;
                    case "search":
                        location.href = "/search?id="+localStorage.getItem("lastsearch");
                        break;
                    case "notifications":
                        location.href = "/notifications";
                        break;
                    case "follow_requests":
                        location.href = "/follow_requests";
                        break;
                    default:
                        location.href = "/timeline/"+localStorage.getItem("currentpage");
                        break;
                }
                e.preventDefault();
            });
        </script>
    </div>
</Layout>